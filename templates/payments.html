{% extends "base.html" %}

{% block content %}
<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Payments</h4>
    <form method="GET" action="{{ url_for('view_payments') }}" class="d-flex" role="search">
      <input name="q" value="{{ search_query }}" type="text" class="form-control me-2" placeholder="Search by student, admission no, term">
      <button class="btn btn-outline-primary" type="submit">Search</button>
    </form>
  </div>

  {% if payments %}
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Student</th>
          <th>Admission No</th>
          <th>Term</th>
          <th>Amount Paid</th>
          <th>Payment Date</th>
          <th>Receipt</th>
        </tr>
      </thead>
      <tbody>
        {% for payment in payments %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ payment.student_name }}</td>
          <td>{{ payment.admission_no }}</td>
          <td>{{ payment.term_name }}</td>
          <td>{{ payment.amount_paid }}</td>
          <td>{{ payment.payment_date }}</td>
          <td>
            <a href="{{ url_for('view_receipt', payment_id=payment.id) }}" class="btn btn-sm btn-outline-info">
              View Receipt
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <div class="alert alert-info">No payments found.</div>
  {% endif %}

</div>
{% endblock %}
